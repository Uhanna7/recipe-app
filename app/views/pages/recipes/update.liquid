---
method: post
---
{% liquid
  function current_user = 'modules/user/lib/queries/user/current'
  function can = 'modules/permission/lib/helpers/can_do', requester: current_user, do: 'courses.manage'
  unless can
    redirect_to 'recipes/recipes'
  endunless

  function object = 'app/lib/commands/recipes/update', object: context.params

  if object.valid
    redirect_to '/recipes/{{ object.id }}'
  endif
%}